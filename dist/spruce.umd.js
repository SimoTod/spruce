!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.spruce=t()}(this,function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var n=function(e){return null==e},r=function(e,t){return Object.keys(e).forEach(function(o){n(e[o])||Object.getPrototypeOf(e[o])!==Object.prototype||(e[o]=r(e[o],t))}),new Proxy(e,{get:function(e,n){return t.hasOwnProperty("get")&&t.get(n),e[n]},set:function(e,o,i){return n(i)||"object"!=typeof i||(i=r(i,t)),t.set(o,e[o]=i),!0}})},o={options:{globalStoreVariable:!1},events:{events:{},on:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},emit:function(e,t){void 0===t&&(t={}),this.events[e]&&this.events[e].forEach(function(e){e(t)}),window.dispatchEvent(new CustomEvent("spruce:"+e,{detail:t,bubbles:!0}))}},stores:{},subscribers:[],start:function(){try{var e=this;return Promise.resolve(new Promise(function(e){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",e):e()})).then(function(){document.querySelectorAll("[x-subscribe]").forEach(function(e){e.setAttribute("x-init",function(e){var t="$store = Spruce.subscribe($el)";return e.hasAttribute("x-init")&&(t=t+"; "+e.getAttribute("x-init")),t}(e)),e.removeAttribute("x-subscribe")}),e.stores=r(e.stores,{set:function(t,n){e.updateSubscribers(t,n)}}),e.options.globalStoreVariable&&(document.querySelectorAll("[x-data]").forEach(function(t){e.subscribers.includes(t)||e.subscribers.push(t)}),window.$store=e.stores)})}catch(e){return Promise.reject(e)}},store:function(e,t){void 0===t&&(t={}),this.stores[e]||(this.stores[e]=t)},subscribe:function(e){return this.subscribers.push(e),this.stores},updateSubscribers:function(e,t){this.subscribers.forEach(function(e){void 0!==e.__x&&e.__x.updateElements(e)})},config:function(e){void 0===e&&(e={}),this.options=Object.assign(this.options,e)},on:function(e,t){this.events.on(e,t)},emit:function(n,r){void 0===r&&(r={}),this.events.emit(n,function(n){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach(function(t){e(n,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({},r,{store:this.stores}))}},i=window.deferLoadingAlpine||function(e){e()};return window.deferLoadingAlpine=function(e){window.Spruce=o,window.Spruce.start(),i(e)},o});
//# sourceMappingURL=spruce.umd.js.map
