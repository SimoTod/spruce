var t={stores:{},subscribers:[],start:function(){try{var t=this;return Promise.resolve(new Promise(function(t){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",t):t()})).then(function(){var e,r;document.querySelectorAll("[x-subscribe]").forEach(function(t){t.setAttribute("x-init",function(t){var e="$store = Spruce.subscribe($el)";return t.hasAttribute("x-init")&&(e=e+"; "+t.getAttribute("x-init")),e}(t)),t.removeAttribute("x-subscribe")}),t.stores=(e=t.stores,r=function(e,r){t.updateSubscribers(e,r)},Object.keys(e).forEach(function(t){Object.getPrototypeOf(e[t])===Object.prototype&&(e[t]=create(e[t],r))}),new Proxy(e,{set:function(t,e,n){return"object"==typeof n&&(n=create(n,r)),r(e,t[e]=n),!0}}))})}catch(t){return Promise.reject(t)}},store:function(t,e){void 0===e&&(e={}),this.stores[t]||(this.stores[t]=e)},subscribe:function(t){return this.subscribers.push(t),this.stores},updateSubscribers:function(t,e){this.subscribers.forEach(function(r){"undefined"!==r.__x&&(r.__x.$data.spruce=[t,e])})}},e=window.deferLoadingAlpine||function(t){t()};window.deferLoadingAlpine=function(r){window.Spruce=t,window.Spruce.start(),e(r)};export default t;
//# sourceMappingURL=spruce.module.js.map
